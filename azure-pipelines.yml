# Starter pipeline
# https://aka.ms/yaml

trigger:
- main
pr:
- main

pool:
  vmImage: 'windows-latest'

steps:
- task: PowerShell@2
  inputs:
    targetType: 'inline'
    script: |
      Set-Content -Encoding UTF8 -Path .\allcommands.ps1 -Value "### DO NOT EDIT THIS FILE DIRECTLY ###"
      Get-ChildItem -Path ".\functions\*.ps1" -Recurse | Get-Content | Add-Content .\allcommands.ps1
      Get-ChildItem -Path ".\internal\functions\*.ps1" -Recurse | Get-Content | Add-Content .\allcommands.ps1
- task: PublishPipelineArtifact@1
  inputs:
    targetPath: '$(Pipeline.Workspace)'
    artifact: 'Workspace'
    publishLocation: 'pipeline'